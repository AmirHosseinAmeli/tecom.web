<!DOCTYPE html>
<html ng-app="tecomApp">

<head>
    <title>سرویس تیکام</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <base href="/">
    <link rel="stylesheet" href="static/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="static/lib/bootstrap-rtl/dist/css/bootstrap-rtl.min.css" />
    <link rel="stylesheet" href="static/lib/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="static/lib/material-design-iconic-font/dist/css/material-design-iconic-font.min.css" />
    <link rel="stylesheet" href="static/css/style.css" />

    <script src="static/lib/angular/angular.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pouchdb/2.2.3/pouchdb.js"></script>

</head>

<body>
    <div class="content">
      <ui-view></ui-view>
    </div>

    <script src="static/lib/angular-ui-router/release/angular-ui-router.min.js"></script>
    <script src="static/lib/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
    <script src="static/lib/angular-pouchdb/angular-pouchdb.min.js"></script>
    <script src="static/lib/socket.io-client/socket.io.js"></script>
    <script src="app/app.module.js"></script>
    <script src="app/app.routes.js"></script>
    <script src="app/app.config.js"></script>
    <script src="app/shared/socket/socket.js"></script>
    <script src="app/app.db.js"></script>
    <script src="app/components/messenger/channels/channelsController.js"></script>
    <script src="app/components/messenger/channels/createChannelController.js"></script>
    <script src="app/components/messenger/messages/messagesController.js"></script>
    <script src="app/components/messenger/channels/channelsService.js"></script>
    <script src="app/components/messenger/messages/messagesService.js"></script>
    <script>
    // TODO: This is obviously temporary. Please remove after login implementation.
    (function() {

      var COOKIE_NAME = 'tmp_memberid';

      var createCookie = function createCookie(value) {
        document.cookie = COOKIE_NAME + "=" + value + "; path=/";
      };

      var getCookie = function(name) {
        var dc = document.cookie;
        var prefix = name + "=";
        var begin = dc.indexOf("; " + prefix);
        if (begin == -1) {
            begin = dc.indexOf(prefix);
            if (begin != 0)
              return undefined;
        } else {
            begin += 2;
            var end = document.cookie.indexOf(";", begin);
            if (end == -1) {
              end = dc.length;
            }
        }
        return decodeURI(dc.substring(begin + prefix.length, end));
      };

      var cookie = getCookie(COOKIE_NAME);
      if (!cookie) {
        window.memberId = prompt('شماره ی عضویت خود را وارد کنید.');
        createCookie(window.memberId);
      } else {
        window.memberId = cookie;
      }
      
      console.log('MemberId is set to: ' + window.memberId);
    })();
    </script>
</body>

</html>
